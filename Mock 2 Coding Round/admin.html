<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Section</title>
</head>
<body>
    <nav>
        <li><a href="#">Login Page</a></li>
        <li><a href="data.html">Data Page</a></li>
        <li><a href="reports.html">Report Page</a></li>
    </nav>
    <h3>Login</h3>
    <form action="">
        <label for="email">Email</label>
        <input type="email" id="email" name="email">
        <label for="password">Password</label>
        <input type="password" id="password">
        <input type="submit" value="submit">
    </form>
    <p id="loginmsg"></p>
</body>
</html>
<script>


    let datalink = document.querySelector('a[href="data.html"]')
    let reportlink = document.querySelector('a[href="reports.html"]')
    function displaymessage(event)
    {
        event.preventDefault()
        alert("Please login first!!")
    }
    datalink.addEventListener("click", displaymessage)
    reportlink.addEventListener("click", displaymessage)


let form= document.querySelector("form")
let emailinp= document.querySelector("#email")
let passwordinp= document.querySelector("#password")
let loginmsg= document.querySelector("#loginmsg")


form.addEventListener("submit", (event)=>{
    event.preventDefault()

    let email=emailinp.value
    let password= passwordinp.value
    
    if(email=="")
    {
        loginmsg.innerText= "Please enter your email"
    }
    else if(password=="")
    {
        loginmsg.innerText="Please enter your password"
    }
    else{
        form.style.display="none"
        loginmsg.innerText="Login in process..."
        setTimeout(()=>{
            fetch("https://reqres.in/api/login",{
                method: "POST",
                headers: {
                    "Content-Type" : "application/json"
                },
                body: JSON.stringify({
                    email:email,
                    password:password
                })
            })
            .then((res)=>{
                if(res.ok)
                {
                    loginmsg.innerText="Login successful"
                    setTimeout(()=>{
                        window.location.href="data.html"
                    },2000)
                }
                else{
                    form.style.display="block"
                    loginmsg.innerText="Login failed!!, Please try again..."
                    emailinp.value=""
                    passwordinp.value=""
                }
            })
            .catch((err)=>{
                form.style.display="block"
                loginmsg.innerText="Login failed!!, Please try again..."
                    emailinp.value=""
                    passwordinp.value=""
            },2500)
        })
    }
})



</script>